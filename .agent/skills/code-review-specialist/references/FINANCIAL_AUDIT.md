# 財務計算監査チェックリスト (Financial Audit Checklist)

このドキュメントは、ARIA プロジェクトにおける「1円の狂いも許さない」計算精度を実現するための監査基準である。

## 1. 型の選択 (Type Selection)
- [ ] **浮動小数点の禁止**: 金額や株数などの重要な計算に `float` が使われていないか。
    - 推奨: `decimal.Decimal` (Python) または整数（銭単位など）での管理。
- [ ] **精度指定**: `Decimal` を使う場合、コンテキスト（精度）が明示的に設定されているか。

## 2. 丸め処理 (Rounding Protocols)
- [ ] **一貫性**: システム全体で丸めルール（四捨五入、切り捨て、JIS丸め等）が統一されているか。
- [ ] **タイミング**: 計算の途中で何度も丸めを行わず、最終出力直前で行っているか（累積誤差の防止）。

## 3. データ境界と整合性
- [ ] **オーバーフロー**: 非常に大きな時価総額や合計金額を扱う際のデータ型制限。
- [ ] **NULL 処理**: 計算対象に NULL が含まれる場合のフォールバック（0として扱うのか、計算不能とするのか）の定義。
- [ ] **負の値の許容**: 本来正であるべき値（時価等）がマイナスになっていないか。

## 4. ビジネスロジックの妥当性
- [ ] **単価 × 数量 = 合計**: 基本的な乗算結果が論理的に正しいか。
- [ ] **株式分割の影響**: 分割・併合時の遡及修正計算が正確か。
